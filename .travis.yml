
# MY TUTORIALS
# http://blog.tgrrtt.com/exploring-the-travisci-configuration-file
# https://docs.travis-ci.com/user/customizing-the-build
# https://www.sysorchestra.com/2016/07/18/introduction-on-how-to-use-shellcheck-and-bashate-with-travis-ci/
# https://www.sysorchestra.com/2014/10/12/travisshunit2/

# sudo pip install --upgrade pip

# I. With Travis-CI, the typical build process has the following steps:
# 1. before_install
# 2. install
# 3. before_script
# 4. script
# 5. after_success / after_failure
# 6. after_script
#
# II. If specified, these take place after the the after_script has run.
# 1. before_deploy
# 2. deploy
# 3. after_deploy

dist: trusty
sudo: required

language: bash

# addons:
#   apt:
#     sources:
#       - debian-sid    # Grab ShellCheck from the Debian repo
#     packages:
#       - shellcheck

before_install:
  - sudo apt-add-repository "deb http://archive.ubuntu.com/ubuntu trusty-backports main restricted universe multiverse"
  - sudo apt-get -qq update
  - sudo apt-get -t trusty-backports install shellcheck
  - sudo -H pip install bashate

# install:
  # - echo "TODO INSTALL"

before_script:
  - curl -L "http://downloads.sourceforge.net/shunit2/shunit2-2.1.3.tgz" | tar zx
  - ln -s shunit2-2.1.3 shunit2

script:
  - shellcheck ./configure.sh
  - bashate -i E002,E003 ./configure.sh

  - shellcheck ./scripts/users-config.sh
  - bashate -i E002,E003 ./scripts/users-config.sh

  - shellcheck ./scripts/lightdm-config.sh
  - bashate -i E002,E003 ./scripts/lightdm-config.sh
  
  - shellcheck ./scripts/saltstack-config.sh
  - bashate -i E002,E003 ./scripts/saltstack-config.sh
  
  - shellcheck ./scripts/hosts-config.sh
  - bashate -i E002,E003 ./scripts/hosts-config.sh
  
  - shellcheck ./scripts/initial-software.sh
  - bashate -i E002,E003 ./scripts/initial-software.sh
  
  - shellcheck ./scripts/extra-software.sh
  - bashate -i E002,E003 ./scripts/extra-software.sh
  
  - shellcheck ./scripts/customization.sh
  - bashate -i E002,E003 ./scripts/customization.sh
  
  - shellcheck ./scripts/misc-hacks.sh
  - bashate -i E002,E003 ./scripts/misc-hacks.sh
  
  - shellcheck ./scripts/config-printers.sh
  - bashate -i E002,E003 ./scripts/config-printers.sh
  
  - shellcheck ./scripts/admin-config.sh
  - bashate -i E002,E003 ./scripts/admin-config.sh
  
  - shellcheck ./scripts/nsswitch-config.sh
  - bashate -i E002,E003 ./scripts/nsswitch-config.sh
  
  - shellcheck ./scripts/crontab-config.sh
  - bashate -i E002,E003 ./scripts/crontab-config.sh
  
  - shellcheck ./scripts/fstab-config.sh
  - bashate -i E002,E003 ./scripts/fstab-config.sh
  
  - shellcheck ./scripts/install-scripts.sh
  - bashate -i E002,E003 ./scripts/install-scripts.sh
  
  - shellcheck ./scripts/nslcd-config.sh
  - bashate -i E002,E003 ./scripts/nslcd-config.sh
  
  - shellcheck ./etc/update-motd.d/99-gaph-banner.sh
  - bashate -i E002,E003 ./etc/update-motd.d/99-gaph-banner.sh

  # - bash tests/myscript_shunit2_tests.sh


# after_success:
  # - echo "TODO after_success"

# after_failure:
  # - echo "TODO after_failure"

# after_script:
  # - echo "TODO after_script"

# here's a build step block
# after_script: 
  # - echo "We can put normal shell commands here"
  # - echo "more shell commands here"
